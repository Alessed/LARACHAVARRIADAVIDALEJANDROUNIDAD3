@using Microsoft.AspNetCore.Http

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <title>Dental Center</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <style>
        /* Tus estilos existentes */
        .dental-sidebar {
            background: linear-gradient(180deg, #2b6cb0 0%, #3182ce 100%);
            color: white;
            width: 250px;
            transition: all 0.3s;
        }

        .dental-content {
            margin-left: 250px;
            transition: all 0.3s;
        }

        .sidebar-link {
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

            .sidebar-link:hover {
                background: rgba(255,255,255,0.1);
                border-left-color: white;
            }

            .sidebar-link.active {
                background: rgba(255,255,255,0.15);
                border-left-color: white;
                font-weight: 500;
            }

        .mobile-menu-button {
            display: none;
        }

        @@media (max-width: 768px) {
            .dental-sidebar {
                position: fixed;
                z-index: 50;
                transform: translateX(-100%);
            }

                .dental-sidebar.open {
                    transform: translateX(0);
                }

            .dental-content {
                margin-left: 0;
            }

            .mobile-menu-button {
                display: block;
            }

            .overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.5);
                z-index: 40;
            }

                .overlay.open {
                    display: block;
                }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex">

    <!-- Sidebar -->
    <aside class="dental-sidebar fixed h-full shadow-lg">
        <div class="p-4 border-b border-blue-400">
            <h1 class="text-xl font-bold flex items-center">
                <i class="fas fa-tooth mr-2"></i>Dental Center
            </h1>
            @if (!string.IsNullOrEmpty(Context.Session.GetString("NombreUsuario")))
            {
                <p class="text-sm mt-2 text-blue-100">@Context.Session.GetString("NombreUsuario")</p>
            }

        </div>

        <nav class="p-2">
            <ul class="space-y-1">
                <li><a href="/VistaUsuario/Index" class="sidebar-link flex items-center p-3 rounded"><i class="fas fa-home mr-3"></i>Inicio</a></li>
                <li><a href="/VistaUsuario/Citas" class="sidebar-link flex items-center p-3 rounded"><i class="fas fa-calendar-check mr-3"></i>Mis Citas</a></li>
                <li><a href="/VistaUsuario/Tratamientos" class="sidebar-link flex items-center p-3 rounded"><i class="fas fa-teeth mr-3"></i>Tratamientos</a></li>
                <li><a href="/VistaUsuario/Dentistas" class="sidebar-link flex items-center p-3 rounded"><i class="fas fa-user-md mr-3"></i>Dentistas</a></li>
                <li><a href="/VistaUsuario/Contacto" class="sidebar-link flex items-center p-3 rounded"><i class="fas fa-file-medical mr-3"></i>Contacto</a></li>
                <li><a href="/VistaUsuario/Ayuda" class="sidebar-link flex items-center p-3 rounded"><i class="fas fa-question-circle mr-3"></i>Ayuda</a></li>

                <form asp-controller="Auth" asp-action="Logout" method="post">
                    @Html.AntiForgeryToken()
                    <button type="submit" class="sidebar-link flex items-center p-3 rounded text-red-100 hover:text-red-50">
                        <i class="fas fa-sign-out-alt mr-3"></i> Cerrar sesión
                    </button>
                </form>
            </ul>
        </nav>
    </aside>

    <!-- Mobile menu button -->
    <button class="mobile-menu-button fixed top-4 left-4 z-30 bg-blue-600 text-white p-2 rounded-md shadow-lg md:hidden">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Overlay for mobile -->
    <div class="overlay"></div>

    <!-- Main Content -->
    <div class="dental-content flex-1 flex flex-col min-h-screen">
        <div class="bg-white shadow-sm p-4 md:hidden flex justify-between items-center">
            <h2 class="text-lg font-semibold text-blue-800">Dental Center</h2>
            <div class="flex items-center space-x-3">
                <button id="mobile-chatbot-trigger" class="text-blue-600"><i class="fas fa-robot"></i></button>
            </div>
        </div>

        <main class="flex-grow bg-gray-50 p-4 md:p-8">
            @RenderBody()
        </main>

        <footer class="bg-white border-t border-gray-200 py-4">
            <div class="container mx-auto px-4 text-center text-sm text-gray-600">
                &copy; @DateTime.Now.Year Dental Center. Todos los derechos reservados.
            </div>
        </footer>
    </div>

    <script>
        // Evitar que el usuario regrese al contenido después de cerrar sesión
        history.pushState(null, null, location.href);
        window.onpopstate = function () {
            history.go(1);
        }
    </script>



    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
